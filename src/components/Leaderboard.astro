---
import Layout from "../layouts/Layout.astro";
import { getTranslations } from "../i18n/utils";

interface Props {
  locale: string;
}

const { locale } = Astro.props;
const t = getTranslations(locale);

const leaderboardData = [
  { name: "Filippo", points: 1, pending: true },
  { name: "Antonio", points: 1, pending: true },
  { name: "Diego", points: 1, pending: true },
  { name: "Francesco", points: 0, pending: false },
  { name: "Riccardo", points: 0, pending: false },
];

const sortedData = [...leaderboardData].sort((a, b) => b.points - a.points);
---

<Layout title={t.title} locale={locale}>
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">
      {t.title}
    </h1>

    <div class="overflow-x-auto">
      <table class="w-full max-w-2xl mx-auto bg-white rounded-lg shadow-md">
        <thead class="bg-gray-800 text-white">
          <tr>
            <th class="px-6 py-3 text-left">{t.name}</th>
            <th class="px-6 py-3 text-left">{t.ficuzPoints}</th>
            <th class="px-6 py-3 text-left">{t.pendingFicuzPoint}</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          {
            sortedData.map((entry, index) => {
              const medal =
                index === 0
                  ? "ðŸ¥‡"
                  : index === 1
                    ? "ðŸ¥ˆ"
                    : index === 2
                      ? "ðŸ¥‰"
                      : "";
              return (
                <tr class="hover:bg-gray-50">
                  <td class="px-6 py-4 font-medium text-gray-900">
                    {entry.name}
                    {medal && <span class="mr-2">{medal}</span>}
                  </td>
                  <td class="px-6 py-4 text-gray-700">
                    {entry.points} {t.unit}
                  </td>
                  <td class="px-6 py-4">
                    <span
                      class={`px-2 py-1 rounded text-sm ${entry.pending ? "bg-red-100 text-red-800" : "bg-green-100 text-green-800"}`}
                    >
                      {entry.pending ? t.yes : t.no}
                    </span>
                  </td>
                </tr>
              );
            })
          }
        </tbody>
      </table>
    </div>

    <div class="max-w-2xl mx-auto mt-8 bg-white rounded-lg shadow-md p-6">
      <h2 class="text-xl font-bold text-gray-800 mb-4">{t.rules}</h2>
      <div class="space-y-3">
        <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
          <span
            class="shrink-0 w-12 h-8 flex items-center justify-center bg-red-500 text-white font-bold rounded text-sm"
          >
            +1 PF
          </span>
          <p class="text-gray-700">{t.rule1Desc}</p>
        </div>
        <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
          <span
            class="shrink-0 w-12 h-8 flex items-center justify-center bg-red-500 text-white font-bold rounded text-sm"
          >
            +1 PF
          </span>
          <p class="text-gray-700">{t.rule2Desc}</p>
        </div>
        <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
          <span
            class="shrink-0 w-12 h-8 flex items-center justify-center bg-red-600 text-white font-bold rounded text-sm"
          >
            +2 PF
          </span>
          <p class="text-gray-700">{t.rule3Desc}</p>
        </div>
      </div>
    </div>
  </div>
</Layout>
